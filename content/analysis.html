---
title: Analysis
description:
toc: true
featuredVideo:
featuredImage: https://i0.wp.com/reflectionsonbaseball.com/wp-content/uploads/2020/01/mlbnba.png?fit=604%2C323&ssl=1
draft: false
---


<div id="TOC">

</div>

<div id="motivations-of-our-data-analysis" class="section level2">
<h2>Motivations of Our Data Analysis:</h2>
<p>What motivates our analysis is a desire to examine our relationship between trends in both the MLB and NBA, and see what comparisons we can draw between the two leagues, especially in regards to player streakiness. We define a streak as the measure of the number of consecutive games a player performs above their average in a specific statistic. We define streakiness as a players propensity to perform above their average, and to what degree over the course of a season. The main variables that we are interested in analyzing are hits, walks,homeruns and strikeouts in the MLB, and points,rebounds, and assists in the NBA. To accomplish this goal, we have split the project into two separate tasks. We first performed analysis on both the NBA and MLB data separately to gain insight into how streaks are distributed in their respective leagues. Once this was completed, we combined our findings to determine whether any relationships exist between baseball and basketball players.</p>
</div>
<div id="nba-eda" class="section level2">
<h2>NBA EDA:</h2>
</div>
<div id="identifying-streaks" class="section level2">
<h2>Identifying Streaks:</h2>
<p>For the NBA data, we first wanted to identify the longest streaks in the NBA. This would help us get a sense of which players had the longest streaks for a particular statistic in the league in a given season. The first statistic to look at was points. To assess the longest scoring streaks in the league, we had to calculate the points per season for each player. The dataset contains game-by-game data for each player, but does not account for entire season statistics. This meant that some cleaning and calculations were necessary. First, as stated in the Data page, any erroneous extra rows were removed. This provided the appropriate amount of games played by each player. Then the season average in points scored was caclulated by dividing the total points scored by the total number of games played for each player, respectively. The field goal percentage was also calculated by dividing the total number of field goal made by the total number offield goal attempts. As seen in the table below, the table now listed the season points and field goal average, grouped by each player. Similarly, the assists and rebounds per game were also calculated. Additionally, we used some advanced metrics to aid us in our inference and analysis. In particular, we use true shooting percentage, offensive rating, and usage rate. TS% is a weighted field goal percentage that accounts for the difference in two and three point shots, and adjusts for free throws. Offensive rating is a metric that uses a per 100 posessions basis for offensive capability including TS%, but it also accounts for turnovers. Usage percentage is a metric of how often the player is used in a team’s offense, which is relevant for determining how much player’s will score. For the KenPom team model used later, team offensive and defensive ratings are used along with pace. Pace is a metric for determining the amount of possesions and shot attempts the game will have. Defensive rating is a metric for determining how many points per 100 posessions a team is likely to allow.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.2 --
## v ggplot2 3.4.0      v purrr   0.3.5 
## v tibble  3.1.8      v dplyr   1.0.10
## v tidyr   1.2.1      v stringr 1.4.1 
## v readr   2.1.3      v forcats 0.5.2</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 4.2.2</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 4.2.2</code></pre>
<pre><code>## Warning: package &#39;readr&#39; was built under R version 4.2.2</code></pre>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 4.2.2</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(knitr)

nba_data22 &lt;- read.csv(file = &#39;../dataset/ASA All NBA Raw Data 2022 regular season.csv&#39;)

nba_ppg22 &lt;- group_by(nba_data22, player) %&gt;%
  filter(mp != &#39;0:00&#39;) %&gt;%
  distinct(game_date, .keep_all = TRUE) %&gt;%
  summarize(total_games = n(),
            ppg = sum(pts)/total_games,
            fg_percentage = sum(fg)/sum(fga),
            apg = sum(ast)/total_games,
            rpg = sum(trb)/total_games)

head10 &lt;- nba_ppg22 %&gt;% head(10)

knitr::kable(head10)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="24%" />
<col width="16%" />
<col width="14%" />
<col width="18%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">player</th>
<th align="right">total_games</th>
<th align="right">ppg</th>
<th align="right">fg_percentage</th>
<th align="right">apg</th>
<th align="right">rpg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Aaron Gordon</td>
<td align="right">75</td>
<td align="right">15.0133333</td>
<td align="right">0.5203837</td>
<td align="right">2.5066667</td>
<td align="right">5.8400000</td>
</tr>
<tr class="even">
<td align="left">Aaron Henry</td>
<td align="right">6</td>
<td align="right">0.3333333</td>
<td align="right">0.2000000</td>
<td align="right">0.0000000</td>
<td align="right">0.1666667</td>
</tr>
<tr class="odd">
<td align="left">Aaron Holiday</td>
<td align="right">63</td>
<td align="right">6.3492063</td>
<td align="right">0.4467456</td>
<td align="right">2.4285714</td>
<td align="right">1.9365079</td>
</tr>
<tr class="even">
<td align="left">Aaron Nesmith</td>
<td align="right">52</td>
<td align="right">3.7692308</td>
<td align="right">0.3956044</td>
<td align="right">0.4230769</td>
<td align="right">1.7115385</td>
</tr>
<tr class="odd">
<td align="left">Aaron Wiggins</td>
<td align="right">50</td>
<td align="right">8.3200000</td>
<td align="right">0.4629080</td>
<td align="right">1.3600000</td>
<td align="right">3.5600000</td>
</tr>
<tr class="even">
<td align="left">Abdel Nader</td>
<td align="right">14</td>
<td align="right">2.4285714</td>
<td align="right">0.3428571</td>
<td align="right">0.5000000</td>
<td align="right">1.9285714</td>
</tr>
<tr class="odd">
<td align="left">Ade Murkey</td>
<td align="right">1</td>
<td align="right">0.0000000</td>
<td align="right">NaN</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">Admiral Schofield</td>
<td align="right">38</td>
<td align="right">3.8421053</td>
<td align="right">0.4186047</td>
<td align="right">0.6578947</td>
<td align="right">2.3421053</td>
</tr>
<tr class="odd">
<td align="left">Ahmad Caver</td>
<td align="right">1</td>
<td align="right">2.0000000</td>
<td align="right">1.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">Al Horford</td>
<td align="right">69</td>
<td align="right">10.1594203</td>
<td align="right">0.4674868</td>
<td align="right">3.3623188</td>
<td align="right">7.6811594</td>
</tr>
</tbody>
</table>
<p>We wanted to take a look at the most efficient scorers amongst the top scorers. Temporarily setting a threshold for players who scored at least 20 points per game, we made a scatterplot that visualized this relationship to get a sense of who we might expect to have the longest streaks, seen below.</p>
<pre class="r"><code>scoring &lt;- filter(nba_ppg22, ppg &gt;= 25)

ggplot(scoring, aes(x=fg_percentage, y=ppg, label=player)) +
  geom_point() +
  geom_text(hjust=0, vjust=0) + 
  ggtitle(&quot;25+ PPG Scorers Against Field Goal Percentage&quot;)</code></pre>
<pre class="r"><code># To Prevent Needing to Rerun EDA Each Time
knitr::include_graphics(&#39;analysis_files/figure-html/Rplot01.png&#39;)</code></pre>
<p><img src="/analysis_files/figure-html/Rplot01.png" width="400" /></p>
<p>We see above that Lebron James and Joel Embiid scored the most points in the 2022 season, and that they were among the most efficient players in this pool, alongside Giannis Antetokounmpo, Nikola Jokic, and Kevin Durant. Because of their prolific and efficient scoring, we at first expected them to be the among the players with the longest streaks. However, because of their consistancy, it was instead hypothesized that the streakiest players, and therefore the players with the longest streaks, would be those with a lower usage rates and lower scoring - possibly role players who were infrequently given a chances to score above their usual means.</p>
<p>Because we score streaks based on the individual game performance AGAINST their season average, we needed to join the calculated season averages to the entire game-by-game data, as shown below. Additionally, in this merged dataset, we calculated the deviation per game for each of the three following statistics: points, assists, and rebounds. The deviation was calculated as the statistic from one game substracted by that player’s season average in that statistic. For example, 5 <code>pts</code> scored in one game substracted from 10 <code>ppg</code> will result in a <code>deviationppg</code> of -5.</p>
<pre class="r"><code>merged2022 &lt;- nba_ppg22 %&gt;% inner_join(nba_data22, by=&quot;player&quot;) %&gt;%
  filter(mp != &#39;0:00&#39;) %&gt;%
  group_by(player) %&gt;%
  distinct(game_date, .keep_all = TRUE) %&gt;%
  ungroup() %&gt;%
  mutate(date = as.Date(game_date, format = &quot;%Y-%m-%d&quot;)) %&gt;%
  mutate(deviationppg = pts-ppg,
         deviationapg = ast-apg,
         deviationrpg = trb-rpg) %&gt;%
  arrange(player, date)</code></pre>
<p>The next step was to actually find the streaks. For this, we downloaded the package <code>data.table</code>. This assisted us in finding the longest consecutive strings of consecutive games for each statistic. Using points as an example, if a player had a game with a positive <code>deviationppg</code>, the <code>positive_dev_ppg</code> will be 1. This column is tracked by the <code>Consec_ppg</code> column, which increases by 1 each time a player has a positive deviation in a consecutive game. We accounted for each player, grouping by player within this function to ensure that the streaks don’t overlap players by mistake. We also took this opportunity to find the number of games played by a player in the season. This allows us to plot using game number instead of game date for more consistency.</p>
<pre class="r"><code>library(data.table)</code></pre>
<pre><code>## Warning: package &#39;data.table&#39; was built under R version 4.2.2</code></pre>
<pre><code>## 
## Attaching package: &#39;data.table&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     between, first, last</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     transpose</code></pre>
<pre class="r"><code>streaks2022 &lt;- merged2022

setDT(streaks2022)

streaks2022[, positive_dev_ppg := +(deviationppg &gt; 0)
][positive_dev_ppg == 0]

streaks2022[, positive_dev_apg := +(deviationapg &gt; 0)
][positive_dev_apg == 0]

streaks2022[, positive_dev_rpg := +(deviationrpg &gt; 0)
][positive_dev_rpg == 0]

streaks2022[, Consec_ppg := ifelse(positive_dev_ppg == 1, 1:.N, 0L), by = rleid(positive_dev_ppg == 1, player)]

streaks2022[, Consec_apg := ifelse(positive_dev_apg == 1, 1:.N, 0L), by = rleid(positive_dev_apg == 1, player)]

streaks2022[, Consec_rpg := ifelse(positive_dev_rpg == 1, 1:.N, 0L), by = rleid(positive_dev_rpg == 1, player)]

streaks2022[, game_number := ifelse(positive_dev_ppg == 1 | positive_dev_ppg == 0, 1:.N, 0L), by = rleid(player)]</code></pre>
<table>
<colgroup>
<col width="6%" />
<col width="5%" />
<col width="4%" />
<col width="2%" />
<col width="6%" />
<col width="8%" />
<col width="5%" />
<col width="4%" />
<col width="2%" />
<col width="6%" />
<col width="8%" />
<col width="5%" />
<col width="2%" />
<col width="2%" />
<col width="6%" />
<col width="8%" />
<col width="5%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">player</th>
<th align="left">date</th>
<th align="right">ppg</th>
<th align="right">pts</th>
<th align="right">deviationppg</th>
<th align="right">positive_dev_ppg</th>
<th align="right">Consec_ppg</th>
<th align="right">apg</th>
<th align="right">ast</th>
<th align="right">deviationapg</th>
<th align="right">positive_dev_apg</th>
<th align="right">Consec_apg</th>
<th align="right">rpg</th>
<th align="right">trb</th>
<th align="right">deviationrpg</th>
<th align="right">positive_dev_rpg</th>
<th align="right">Consec_rpg</th>
<th align="right">game_number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Aaron Gordon</td>
<td align="left">2021-10-20</td>
<td align="right">15.01333</td>
<td align="right">12</td>
<td align="right">-3.0133333</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2.506667</td>
<td align="right">4</td>
<td align="right">1.4933333</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">5.84</td>
<td align="right">8</td>
<td align="right">2.16</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Aaron Gordon</td>
<td align="left">2021-10-22</td>
<td align="right">15.01333</td>
<td align="right">8</td>
<td align="right">-7.0133333</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2.506667</td>
<td align="right">1</td>
<td align="right">-1.5066667</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5.84</td>
<td align="right">5</td>
<td align="right">-0.84</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Aaron Gordon</td>
<td align="left">2021-10-25</td>
<td align="right">15.01333</td>
<td align="right">12</td>
<td align="right">-3.0133333</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2.506667</td>
<td align="right">1</td>
<td align="right">-1.5066667</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5.84</td>
<td align="right">9</td>
<td align="right">3.16</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Aaron Gordon</td>
<td align="left">2021-10-26</td>
<td align="right">15.01333</td>
<td align="right">20</td>
<td align="right">4.9866667</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2.506667</td>
<td align="right">1</td>
<td align="right">-1.5066667</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5.84</td>
<td align="right">7</td>
<td align="right">1.16</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">Aaron Gordon</td>
<td align="left">2021-10-29</td>
<td align="right">15.01333</td>
<td align="right">13</td>
<td align="right">-2.0133333</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2.506667</td>
<td align="right">2</td>
<td align="right">-0.5066667</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5.84</td>
<td align="right">5</td>
<td align="right">-0.84</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">Aaron Gordon</td>
<td align="left">2021-10-30</td>
<td align="right">15.01333</td>
<td align="right">12</td>
<td align="right">-3.0133333</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2.506667</td>
<td align="right">2</td>
<td align="right">-0.5066667</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5.84</td>
<td align="right">4</td>
<td align="right">-1.84</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">Aaron Gordon</td>
<td align="left">2021-11-01</td>
<td align="right">15.01333</td>
<td align="right">15</td>
<td align="right">-0.0133333</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2.506667</td>
<td align="right">1</td>
<td align="right">-1.5066667</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5.84</td>
<td align="right">10</td>
<td align="right">4.16</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">Aaron Gordon</td>
<td align="left">2021-11-03</td>
<td align="right">15.01333</td>
<td align="right">9</td>
<td align="right">-6.0133333</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2.506667</td>
<td align="right">1</td>
<td align="right">-1.5066667</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5.84</td>
<td align="right">1</td>
<td align="right">-4.84</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Aaron Gordon</td>
<td align="left">2021-11-06</td>
<td align="right">15.01333</td>
<td align="right">9</td>
<td align="right">-6.0133333</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2.506667</td>
<td align="right">2</td>
<td align="right">-0.5066667</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5.84</td>
<td align="right">3</td>
<td align="right">-2.84</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">Aaron Gordon</td>
<td align="left">2021-11-08</td>
<td align="right">15.01333</td>
<td align="right">10</td>
<td align="right">-5.0133333</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2.506667</td>
<td align="right">3</td>
<td align="right">0.4933333</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">5.84</td>
<td align="right">7</td>
<td align="right">1.16</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">10</td>
</tr>
</tbody>
</table>
<p>The above table shows the first 10 rows in the <code>streaks2022</code> dataset, showing the way the streaks were counted. Using this table, we could now see the players with the longest streaks.</p>
<pre class="r"><code>streaktable2 &lt;- streaks2022 %&gt;%
  group_by(player) %&gt;%
  summarize(max_streak = max(Consec_ppg)) %&gt;%
  select(player, max_streak) %&gt;% 
  arrange(-max_streak) %&gt;%
  head(10)

knitr::kable(streaktable2)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">player</th>
<th align="right">max_streak</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bruce Brown</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">Jordan Poole</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">Drew Eubanks</td>
<td align="right">16</td>
</tr>
<tr class="even">
<td align="left">Aleksej Pokusevski</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">Coby White</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">Trendon Watford</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">Cam Thomas</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">DeMar DeRozan</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Ben McLemore</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">De’Anthony Melton</td>
<td align="right">11</td>
</tr>
</tbody>
</table>
<p>As previously theorized, we were able to find that the players with the longest streaks were those that were role players. Only one player (DeMar DeRozan) in the top 10 longest streaks scored over 20 points per game. This would agree with the idea that a longer streak would most likely be accomplished by a player with a lower season average, as a player could be given an opportunity, or go on a ‘hot streak’ to perform above their usual output.</p>
<pre class="r"><code>streaktable3 &lt;- streaks2022 %&gt;% 
  filter(ppg &gt;= 20) %&gt;%
  group_by(player) %&gt;%
  summarize(max_streak = max(Consec_ppg)) %&gt;%
  select(player, max_streak) %&gt;% 
  arrange(-max_streak) %&gt;% 
  head(10)

knitr::kable(streaktable3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">player</th>
<th align="right">max_streak</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">DeMar DeRozan</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">Jaylen Brown</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">De’Aaron Fox</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">Bradley Beal</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Darius Garland</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Devin Booker</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Joel Embiid</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Dejounte Murray</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">Ja Morant</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">Julius Randle</td>
<td align="right">7</td>
</tr>
</tbody>
</table>
<p>Even among the best players, scoring over 20 points per game, the majority of players in the top 10 were those scoring in the low 20s. This again fortifies the theory that players who score prolifically in a season are usually less likely to go on streaks, as they are much more consistent and deviate much less significantly or less frequently.</p>
</div>
<div id="further-analysis-of-streaks" class="section level1">
<h1>Further analysis of streaks:</h1>
<p>Of note, for this further analysis, we will only be considering those players who average greater than 25 minutes a game to get the sample size into a managable state. We further break down these games into only those where the target player played greater than 15 minutes. This is to account for players that might have gotten hurt early in a game, or benched for being in foul trouble, early ejections, unfavorable matchups etc. By allowing them to play at least 15 minutes, we are giving the player the best opportunity to match their season average. This data is also from 2019-2022, so it is possible for a player to continue their streaks into a new season. Additionally, we will not just be examining a players max streak, but rather the players with the highest numbers of streaks defined as the players with the highest average streak value. This is a more informative metric, as any one player can have a big run once in a season, but it is much more indicative of a player’s general streakiness if he consistently performs above his averages.</p>
<p>In these graphs we analyze the relationship between streaks defined by just points scored, and a combination of points, rebounds, and assists. The reasoning behind this is that points scored are not the only statistic of value, and many nba players occupy different roles within an offense that may lead them to play a style of basketball that leads to more rebounds and assists. We theorized that by combining points rebounds and assists, we would represent big men and players whose value does not come from any one area more equitably in the data.</p>
<pre class="r"><code>#visualize distribution of positive player points streaks and PRA streaks
ggplot(all_data) +geom_freqpoly(aes(x=pts_streak))</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/analysis_files/figure-html/further%20EDA-1.png" width="672" /></p>
<pre class="r"><code>summary(all_data$pts_streak)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   1.044   1.000  22.000</code></pre>
<pre class="r"><code>#PRA
ggplot(all_data) +geom_freqpoly(aes(x=PRA_streak))</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/analysis_files/figure-html/further%20EDA-2.png" width="672" /></p>
<pre class="r"><code>summary(all_data$PRA_streak)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   1.149   2.000  23.000</code></pre>
<p>Interestingly, there does not seem to much of a defined difference in the two distributions, and that a players streakiness can be reasonably well measured by one or the other. Next, lets take a closer look at some individual players and see how they are performing in 2022 by both points and P+R+A
<img src="/analysis_files/figure-html/player%20analysis-1.png" width="672" /><img src="/analysis_files/figure-html/player%20analysis-2.png" width="672" /><img src="/analysis_files/figure-html/player%20analysis-3.png" width="672" /><img src="/analysis_files/figure-html/player%20analysis-4.png" width="672" /><img src="/analysis_files/figure-html/player%20analysis-5.png" width="672" /><img src="/analysis_files/figure-html/player%20analysis-6.png" width="672" /><img src="/analysis_files/figure-html/player%20analysis-7.png" width="672" /><img src="/analysis_files/figure-html/player%20analysis-8.png" width="672" /></p>
<p><img src="/analysis_files/figure-html/specific%20player%20analysis-1.png" width="672" /><img src="/analysis_files/figure-html/specific%20player%20analysis-2.png" width="672" /><img src="/analysis_files/figure-html/specific%20player%20analysis-3.png" width="672" /><img src="/analysis_files/figure-html/specific%20player%20analysis-4.png" width="672" /><img src="/analysis_files/figure-html/specific%20player%20analysis-5.png" width="672" /><img src="/analysis_files/figure-html/specific%20player%20analysis-6.png" width="672" /><img src="/analysis_files/figure-html/specific%20player%20analysis-7.png" width="672" /><img src="/analysis_files/figure-html/specific%20player%20analysis-8.png" width="672" /></p>
</div>
<div id="modeling-and-inference" class="section level1">
<h1>Modeling and inference:</h1>
<p>To include a more formal statistical inference, we created two separate models to try to understand the probability that a team/player will perform above average, and which factors weigh most heavily in this decision. The first model is a logistic regression model trained on player data that gives us the probability that a player will perform above their average. We identified key variables most relevant to our question as our explanatory variables, and include one interaction term. The formula is as follows: glm(formula=factor(pts_direction)~ts_pct+usg_pct+usg_pct:ts_pct,family=binomial()). Ultimately, we are less interested in the predictive capability of this model, and instead more interested by how it allows us to see changes in probability as the explanatory variables increase. Due to the massive number of variables present in the NBA data, we did not perform any model selection for the NBA model, but we handpicked variables that we believed to be the most relevant.</p>
<pre class="r"><code>#model building by player
mod1 &lt;-all_data %&gt;%ungroup() %&gt;% glm(formula=factor(pts_direction)~ts_pct+usg_pct+usg_pct:ts_pct,family=binomial())
mod1$coefficients</code></pre>
<pre><code>##    (Intercept)         ts_pct        usg_pct ts_pct:usg_pct 
##      -4.016258       1.715385      -8.964894      37.908866</code></pre>
<pre class="r"><code>exp(mod1$coefficients)</code></pre>
<pre><code>##    (Intercept)         ts_pct        usg_pct ts_pct:usg_pct 
##   1.802028e-02   5.558813e+00   1.278191e-04   2.908114e+16</code></pre>
<pre class="r"><code>all_data &lt;-all_data %&gt;%mutate(pts_direction=ifelse(pts_direction==-1,0,1))

grid &lt;- data_grid(ungroup(all_data), ts_pct= seq_range(ts_pct,100),usg_pct= seq_range(usg_pct,5)) %&gt;% add_predictions(mod1, type = &quot;response&quot; )

ggplot(all_data) +geom_line(aes(x=ts_pct,y=pred,color = factor(usg_pct)),data=grid)</code></pre>
<p><img src="/analysis_files/figure-html/nba%20model%201-1.png" width="672" /></p>
<div id="mlb-broad-analysis" class="section level2">
<h2>MLB Broad Analysis</h2>
<p>To generalize the concept of “streakiness” in MLB, we wanted to find out if there was one single stat that could most strongly predict whether a batter is streaky or not. The following is most of the data cleaning for this analysis:</p>
<pre class="r"><code>library(tidyverse)
library(modelr)
library(ggrepel)</code></pre>
<pre><code>## Warning: package &#39;ggrepel&#39; was built under R version 4.2.2</code></pre>
<pre class="r"><code>stat_fct &lt;- function(x,y){
  ifelse(y &gt; 0, x/y, 0)
}

bat_data_21 &lt;- read_csv(&quot;../dataset/MLB_bat_data_2021.csv&quot;) %&gt;%
  filter(pa &gt; 0) %&gt;%
  select(-game_id, -player_id, -details, -batting_order, -DKP, -FDP, -SDP) %&gt;%
  mutate(singles = h - (doubles + triples + home_runs),
         tb = singles + 2*doubles + 3*triples + 4*home_runs,
         on_base = h + bb + hit_by_pitch) %&gt;%
  arrange(player, game_date)</code></pre>
<pre><code>## Rows: 61316 Columns: 24
## -- Column specification --------------------------------------------------------
## Delimiter: &quot;,&quot;
## chr   (5): game_id, team_abbrev, player_id, player, details
## dbl  (18): ab, r, h, rbi, bb, so, pa, batting_order, doubles, triples, home_...
## date  (1): game_date
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>ops_data_21 &lt;- bat_data_21 %&gt;% group_by(player) %&gt;%
  summarize(ab = sum(ab),
            pa = sum(pa),
            tb = sum(tb),
            on_base = sum(on_base)) %&gt;% 
  mutate(obp = stat_fct(on_base, pa), slg = stat_fct(tb, ab),
         ops = obp + slg) %&gt;% select(player, obp, slg, ops)

MLB_avg_21 &lt;- bat_data_21 %&gt;%
  summarize(ab = sum(ab),
            pa = sum(pa),
            tb = sum(tb),
            on_base = sum(on_base)) %&gt;% 
  mutate(obp = stat_fct(on_base, pa), slg = stat_fct(tb, ab),
         ops = obp + slg) %&gt;% select(obp, slg, ops)

bat_data_day_21 &lt;- left_join(bat_data_21, ops_data_21, by = &quot;player&quot;) %&gt;%
  mutate(MLB_diff = MLB_avg_21$ops - ops)

sim_21 &lt;- bat_data_day_21 %&gt;% group_by(player) %&gt;% filter(sum(pa) &gt;= 500) %&gt;%
  group_by(game_date) %&gt;%
  mutate(obp_game = stat_fct(on_base, pa),
         slg_game = stat_fct(tb, ab),
         ops_game = obp_game + slg_game,
         ops_diff = ops_game - MLB_avg_21$ops,
         above = (ops_diff &gt; 0)) %&gt;% ungroup() %&gt;% group_by(player) %&gt;%
  summarize(games_above = sum(above), games = n(), per = games_above/games,
            ops = mean(ops), pa = sum(pa), home_runs = sum(home_runs),
            bb = sum(bb), so = sum(so))

model_21 &lt;- lm(per ~ ops, data = sim_21)
beta &lt;- coef(model_21)

s_res_21 &lt;- rstandard(model_21)

log_sim_21 &lt;- sim_21 %&gt;% cbind(s_res_21) %&gt;%
  mutate(streaky = ifelse(s_res_21 &lt; 0, 1, 0))</code></pre>
<p>The stat to determine a player’s value in this analysis is OPS. We then calculated among players with at least 500 plate appearances the percentage of their games where they recorded an OPS above the league average of .726 and plotted it against their total OPS for the season. Intuitively, we would expect players with higher overall OPS to have a higher percentage of games where they performed above league average, and that’s what we see here:</p>
<pre><code>## 
## Call:
## lm(formula = per ~ ops, data = sim_21)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.070344 -0.019602  0.001755  0.019199  0.072926 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.03762    0.02348   1.603    0.111    
## ops          0.53782    0.02934  18.331   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.02787 on 133 degrees of freedom
## Multiple R-squared:  0.7164, Adjusted R-squared:  0.7143 
## F-statistic:   336 on 1 and 133 DF,  p-value: &lt; 2.2e-16</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Fitting a linear regression to this data, we find a statistically significant correlation. For our step, we standardized the residuals and determined that players with high magnitude positive residuals were the most “consistent,” and ones with high magnitude negative residuals were the most “streaky.” Why is this? We would expect more streaky players to have a small number of games with big production and a large number of below average games.</p>
<p><br>
To visualize this decision, here’s a game log of Jose Altuve, who is the most consistent player by our residual measure. The graph represents games where performed above or below his OWN average OPS, and the red line represents the MLB average:</p>
<p><img src="/analysis_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>And here’s a game of log of Nathaniel Lowe, who is the most streaky player:</p>
<p><img src="/analysis_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Now we turned to analyze if there was a single stat that could most accurately predict whether a player was streaky or not. At first, we thought that walks would be the best stat, because of the idea that some players are “free swingers;” players that swing at a ton of pitches, don’t draw many walks, but are still on the roster because of their ability to get hot at certain times. However, walks ended up not being a great predictor. We also tried home runs, but that wasn’t a great predictor either.</p>
<p><br>
Out of all stats we tried, strikeouts was the best predictor as seen by this linear regression:</p>
<pre><code>## 
## Call:
## lm(formula = s_res_21 ~ so, data = log_sim_21)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.40988 -0.62661  0.04148  0.66019  2.31564 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1.195161   0.326803   3.657 0.000366 ***
## so          -0.009686   0.002564  -3.778 0.000237 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.9565 on 133 degrees of freedom
## Multiple R-squared:  0.09694,    Adjusted R-squared:  0.09015 
## F-statistic: 14.28 on 1 and 133 DF,  p-value: 0.0002372</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>As well as this logistic regression, where we labeled players as streaky or consistent by the SIGN of their residuals:</p>
<pre><code>## 
## Call:
## glm(formula = streaky ~ so, family = binomial, data = log_sim_21)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -1.8009  -1.0094  -0.6432   1.0926   2.1344  
## 
## Coefficients:
##              Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -3.193448   0.818225  -3.903  9.5e-05 ***
## so           0.024972   0.006438   3.879 0.000105 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 186.79  on 134  degrees of freedom
## Residual deviance: 168.82  on 133  degrees of freedom
## AIC: 172.82
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<pre><code>## Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
## i Please use `linewidth` instead.</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>So we conclude that “free swingers” are not necessarily the streaky players, but rather the “swing for the fences” type of players, meaning players that swing as hard as they can as much as they can in order to hit more home runs, but at the cost of striking out more. It is also interesting to note how strikeouts were correlated to streakiness in a statistically significant way but not home runs, meaning the act of “swinging for the fences” relates to streakiness whether or not the players are actually successful in hitting more home runs.</p>
<p><br>
There are some limitations to this analysis. It generalizes streakiness as a concept to a great degree, and does not cover game-to-game streaks. We also performed a different analysis of streaks in MLB to cover for these shortcomings, and used that analysis to tie in similarities to our NBA analysis.</p>
<p>##Further MLB analysis
For the sake of consistency, we also attempted to apply the same analysis to the MLB data to the NBA.Luckily, an MLB season is almost twice as long as an NBA season, so similar comparisons can be drawn.</p>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/analysis_files/figure-html/Final%20player%20EDA-1.png" width="672" /></p>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   0.834   1.000  19.000</code></pre>
<p><img src="/analysis_files/figure-html/Final%20player%20EDA-2.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-3.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-4.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-5.png" width="672" /></p>
<pre><code>## (Intercept)          pa         rbi   home_runs          so 
##  0.15367939 -0.02152003  1.17322956  0.86338277 -0.45927311</code></pre>
<pre><code>## (Intercept)          pa         rbi   home_runs          so 
##   1.1661170   0.9787099   3.2324151   2.3711683   0.6317427</code></pre>
<p><img src="/analysis_files/figure-html/Final%20player%20EDA-6.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-7.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-8.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-9.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-10.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-11.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-12.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-13.png" width="672" /><img src="/analysis_files/figure-html/Final%20player%20EDA-14.png" width="672" /></p>
<p>##Similarities between the NBA and MLB</p>
<p>First, let’s look at the comparisons in aggregate data in the NBA and MLB by points,PRA, and hits. As you can see, surprisingly, there is a very similar trend among each league, and the distributions match very closely. This may point to the presence of a more universal trait regarding athletes ability to perform above average across long periods of time, not limited to any one league. We will attempt to further draw comparisons between the two leagues below.</p>
<pre class="r"><code>ggplot(all_data_mlb) +geom_freqpoly(aes(x=h_streak)) + ggtitle(&#39;Distribution of hits streaks&#39;) </code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/analysis_files/figure-html/comparison%201-1.png" width="672" /></p>
<pre class="r"><code>ggplot(all_data) +geom_freqpoly(aes(x=pts_streak)) + ggtitle(&#39;Distribution of points streaks&#39;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/analysis_files/figure-html/comparison%201-2.png" width="672" /></p>
<pre class="r"><code>summary(all_data$pts_streak)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   1.044   1.000  22.000</code></pre>
<pre class="r"><code>summary(all_data_mlb$h_streak)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   0.834   1.000  19.000</code></pre>
<p>Next, lets look at the top performers in the MLB and the NBA. Austin Hays had the highest average streak length in the MLB, and RJ Barrett had the highest in the same category in the NBA.</p>
<pre class="r"><code>scoring&lt;-all_data_mlb %&gt;% filter(player == &#39;Austin Hays&#39;) %&gt;%select(change_net,game_date,h_streak)
ggplot(scoring, aes(x=as.Date(as.factor(game_date)), y=change_net, group=1)) +
geom_ribbon(aes(ymin=pmin(change_net,0), ymax=0), fill=&quot;red&quot;, col=&quot;red&quot;, alpha=0.5) +
geom_ribbon(aes(ymin=0, ymax=pmax(change_net,0)), fill=&quot;green&quot;, col=&quot;green&quot;, alpha=0.5) +
geom_point()+
geom_line(aes(y=0)) + ggtitle(&#39;AH Change&#39;) +
ylab(&#39;Points Deviated from Average&#39;) +
xlab(&#39;Date&#39;)</code></pre>
<p><img src="/analysis_files/figure-html/comparison%202-1.png" width="672" /></p>
<pre class="r"><code>ggplot(scoring,aes(h_streak))+geom_density()</code></pre>
<p><img src="/analysis_files/figure-html/comparison%202-2.png" width="672" /></p>
<pre class="r"><code>scoring&lt;-all_data %&gt;% filter(player == &#39;RJ Barrett&#39;) %&gt;%select(change_net,game_date,pts_streak)
ggplot(scoring, aes(x=as.Date(as.factor(game_date)), y=change_net, group=1)) +
geom_ribbon(aes(ymin=pmin(change_net,0), ymax=0), fill=&quot;red&quot;, col=&quot;red&quot;, alpha=0.5) +
geom_ribbon(aes(ymin=0, ymax=pmax(change_net,0)), fill=&quot;green&quot;, col=&quot;green&quot;, alpha=0.5) +
geom_point()+
geom_line(aes(y=0)) + ggtitle(&#39;RJ Change&#39;) +
ylab(&#39;Points Deviated from Average&#39;) +
xlab(&#39;Date&#39;)</code></pre>
<p><img src="/analysis_files/figure-html/comparison%202-3.png" width="672" /></p>
<pre class="r"><code>ggplot(scoring,aes(pts_streak))+geom_density()</code></pre>
<p><img src="/analysis_files/figure-html/comparison%202-4.png" width="672" />
Again, the results are fairly similar and somewhat surprising. It is interesting to note that some of the top player match each others streakiness quite well. For the final comparison, we will use the models we have trained to see if the predictive capabilities of the model are similar. We will use the same players for comparison as the previous analysis.</p>
<pre class="r"><code>#model building by NBA player
mod1 &lt;-all_data %&gt;% filter(player==&#39;RJ Barrett&#39;,season==&#39;2022&#39;) %&gt;%ungroup() %&gt;% glm(formula=factor(pts_direction)~ts_pct+usg_pct+usg_pct:ts_pct,family=binomial())
mod1$coefficients</code></pre>
<pre><code>##    (Intercept)         ts_pct        usg_pct ts_pct:usg_pct 
##      -19.53108       23.45428       51.28271      -39.10093</code></pre>
<pre class="r"><code>exp(mod1$coefficients)</code></pre>
<pre><code>##    (Intercept)         ts_pct        usg_pct ts_pct:usg_pct 
##   3.294264e-09   1.534839e+10   1.869806e+22   1.043958e-17</code></pre>
<pre class="r"><code>summary(mod1)</code></pre>
<pre><code>## 
## Call:
## glm(formula = factor(pts_direction) ~ ts_pct + usg_pct + usg_pct:ts_pct, 
##     family = binomial(), data = .)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -2.4714  -0.6064   0.2394   0.6340   1.7437  
## 
## Coefficients:
##                Estimate Std. Error z value Pr(&gt;|z|)  
## (Intercept)     -19.531      9.589  -2.037   0.0417 *
## ts_pct           23.454     16.516   1.420   0.1556  
## usg_pct          51.283     34.208   1.499   0.1338  
## ts_pct:usg_pct  -39.101     60.930  -0.642   0.5210  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 88.298  on 67  degrees of freedom
## Residual deviance: 53.007  on 64  degrees of freedom
## AIC: 61.007
## 
## Number of Fisher Scoring iterations: 6</code></pre>
<pre class="r"><code>mean(mod1$residuals^2)</code></pre>
<pre><code>## [1] 9.754193</code></pre>
<pre class="r"><code>all_data &lt;-all_data %&gt;%mutate(pts_direction=ifelse(pts_direction==-1,0,1))

grid &lt;- data_grid(ungroup(all_data), ts_pct= seq_range(ts_pct,100),usg_pct= seq_range(usg_pct,5)) %&gt;% add_predictions(mod1, type = &quot;response&quot; )

ggplot(all_data) +geom_line(aes(x=ts_pct,y=pred,color = factor(usg_pct)),data=grid)</code></pre>
<p><img src="/analysis_files/figure-html/comparison%203%20between%20invidual%20players-1.png" width="672" /></p>
<pre class="r"><code>#model building by MLB player
mod2 &lt;-all_data_mlb %&gt;% filter(player==&#39;Austin Hays&#39;) %&gt;% ungroup() %&gt;% glm(formula=factor(h_direction)~pa+rbi+home_runs+so,family=binomial())</code></pre>
<pre><code>## Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</code></pre>
<pre class="r"><code>mod2$coefficients</code></pre>
<pre><code>## (Intercept)          pa         rbi   home_runs          so 
##  -3.0726148   1.0429066   2.6477141  15.9652123  -0.7922636</code></pre>
<pre class="r"><code>exp(mod2$coefficients)</code></pre>
<pre><code>##  (Intercept)           pa          rbi    home_runs           so 
## 4.629993e-02 2.837452e+00 1.412172e+01 8.582298e+06 4.528186e-01</code></pre>
<pre class="r"><code>summary(mod2)</code></pre>
<pre><code>## 
## Call:
## glm(formula = factor(h_direction) ~ pa + rbi + home_runs + so, 
##     family = binomial(), data = .)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -1.7778  -0.6298   0.1287   0.7584   2.0752  
## 
## Coefficients:
##              Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)   -3.0726     1.2129  -2.533  0.01130 *  
## pa             1.0429     0.3147   3.314  0.00092 ***
## rbi            2.6477     1.0625   2.492  0.01270 *  
## home_runs     15.9652  1822.7389   0.009  0.99301    
## so            -0.7923     0.2668  -2.970  0.00298 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 155.954  on 130  degrees of freedom
## Residual deviance:  99.153  on 126  degrees of freedom
## AIC: 109.15
## 
## Number of Fisher Scoring iterations: 18</code></pre>
<pre class="r"><code>mean(mod2$residuals^2)</code></pre>
<pre><code>## [1] 4.064097</code></pre>
<pre class="r"><code>all_data_mlb &lt;-all_data_mlb %&gt;%mutate(h_direction=ifelse(h_direction==-1,0,1))

all_data_mlb_hays &lt;-all_data_mlb %&gt;% filter(player==&#39;Austin Hays&#39;) %&gt;% add_predictions(mod2, type = &quot;response&quot; )
ggplot(all_data_mlb_hays) +geom_point(aes(x=h,y=pred,color=pa),position=&#39;jitter&#39;)</code></pre>
<p><img src="/analysis_files/figure-html/comparison%203%20between%20invidual%20players-2.png" width="672" />
Unfortunately, we can’t use quite the same visualizations for the model, since the range of the number of hits is greatly constrained compared to the offensive rating of a player. In a further analysis, maybe batting average would provide the range necessary. We see that the NBA model is more accurate in its predictive capabilities for the top players, but interestingly less adept at predicting all values across the NBA. Another surprising result is in the summary statistics of each model. All model predictors have 3 star significant codes except for true shooting percentage. This seems counter intuitive, as how well a player shoots on a given night should factor very heavily into how much above average they perform. However, in our analysis we thought that a players given offensive production is largely determined by how often they have a chance to shoot AND their shooting percentage, so we included an interaction term between true shooting percentage and usage percentage to factor in this intuition.</p>
<pre class="r"><code>#model building by NBA player
mod3 &lt;-all_data %&gt;% filter(season==&#39;2022&#39;) %&gt;%ungroup() %&gt;% glm(formula=factor(pts_direction)~ts_pct+usg_pct+usg_pct:ts_pct,family=binomial())</code></pre>
<pre><code>## Warning: glm.fit: algorithm did not converge</code></pre>
<pre class="r"><code>mod3$coefficients</code></pre>
<pre><code>##    (Intercept)         ts_pct        usg_pct ts_pct:usg_pct 
##  -2.656607e+01   1.227434e-13  -1.666976e-12   7.211721e-15</code></pre>
<pre class="r"><code>exp(mod3$coefficients)</code></pre>
<pre><code>##    (Intercept)         ts_pct        usg_pct ts_pct:usg_pct 
##   2.900701e-12   1.000000e+00   1.000000e+00   1.000000e+00</code></pre>
<pre class="r"><code>summary(mod3)</code></pre>
<pre><code>## 
## Call:
## glm(formula = factor(pts_direction) ~ ts_pct + usg_pct + usg_pct:ts_pct, 
##     family = binomial(), data = .)
## 
## Deviance Residuals: 
##        Min          1Q      Median          3Q         Max  
## -2.409e-06  -2.409e-06  -2.409e-06  -2.409e-06  -2.409e-06  
## 
## Coefficients:
##                  Estimate Std. Error z value Pr(&gt;|z|)
## (Intercept)    -2.657e+01  3.329e+04  -0.001    0.999
## ts_pct          1.227e-13  5.379e+04   0.000    1.000
## usg_pct        -1.667e-12  1.629e+05   0.000    1.000
## ts_pct:usg_pct  7.212e-15  2.663e+05   0.000    1.000
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 0.0000e+00  on 9065  degrees of freedom
## Residual deviance: 5.2597e-08  on 9062  degrees of freedom
## AIC: 8
## 
## Number of Fisher Scoring iterations: 25</code></pre>
<pre class="r"><code>mean(mod3$residuals^2)</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>all_data &lt;-all_data %&gt;%mutate(pts_direction=ifelse(pts_direction==-1,0,1))


#model building by MLB player
mod4 &lt;-all_data_mlb %&gt;% ungroup() %&gt;% glm(formula=factor(h_direction)~pa+rbi+home_runs+so,family=binomial())</code></pre>
<pre><code>## Warning: glm.fit: algorithm did not converge</code></pre>
<pre class="r"><code>mod4$coefficients</code></pre>
<pre><code>##   (Intercept)            pa           rbi     home_runs            so 
## -2.656607e+01 -5.047322e-13  7.475590e-14 -2.673676e-14 -8.964672e-14</code></pre>
<pre class="r"><code>exp(mod4$coefficients)</code></pre>
<pre><code>##  (Intercept)           pa          rbi    home_runs           so 
## 2.900701e-12 1.000000e+00 1.000000e+00 1.000000e+00 1.000000e+00</code></pre>
<pre class="r"><code>summary(mod4)</code></pre>
<pre><code>## 
## Call:
## glm(formula = factor(h_direction) ~ pa + rbi + home_runs + so, 
##     family = binomial(), data = .)
## 
## Deviance Residuals: 
##        Min          1Q      Median          3Q         Max  
## -2.409e-06  -2.409e-06  -2.409e-06  -2.409e-06  -2.409e-06  
## 
## Coefficients:
##               Estimate Std. Error z value Pr(&gt;|z|)
## (Intercept) -2.657e+01  2.822e+03  -0.009    0.992
## pa          -5.047e-13  9.627e+02   0.000    1.000
## rbi          7.476e-14  2.674e+03   0.000    1.000
## home_runs   -2.674e-14  6.136e+03   0.000    1.000
## so          -8.965e-14  1.931e+03   0.000    1.000
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 0.0000e+00  on 61313  degrees of freedom
## Residual deviance: 3.5572e-07  on 61309  degrees of freedom
## AIC: 10
## 
## Number of Fisher Scoring iterations: 25</code></pre>
<pre class="r"><code>mean(mod4$residuals^2)</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>all_data_mlb &lt;-all_data_mlb %&gt;%mutate(h_direction=ifelse(h_direction==-1,0,1))</code></pre>
</div>
<div id="flawslimitations" class="section level2">
<h2>Flaws/Limitations:</h2>
<p>One of the main flaws in this analysis are the innate differences of basketball and baseball in both offensive and defensive aspects of the game. Baseball, especially when on offense, is a more individualistic game, whereas basketball relies heavily on the entire team. When a player is batting, their only objective is to hit the ball, while a basketball player may have to pass, changing the potential outcome, especially for those players with high usage rate. These innate differences cause difficulty when trying to make a 1:1 assessment between the two leagues.</p>
</div>
</div>
<div id="modeling-flawslimitations" class="section level1">
<h1>Modeling flaws/limitations:</h1>
<p>Initially, we had created an xgboost model to predict whether a player would score above their average. However, this type of model does not offer much interpretability so we went with a logistic regression model. Additionally, we are assuming that streakiness can be explained purely by the stats we have been given. In reality, these are humans with their own personal motivations, weaknesses, sick days, etc. For example, we know certain great players such as Kobe Bryant and Michael Jordan have performed some of their greatest statistical feats due to grudges, sense of pride, and feeling insulted by other players who doubted their ability. Other players, such as Isaiah Thomas of the celtics, dedicated his most statistically positive season to his sister who had tragically passed away. It is difficult to capture these in person motivations, and they have not been accounted for. Another initial inherent limitation is that we are not taking into account some factors that could have an impact on player performance within their team. For example, one of the highest performers in the NBA in our analysis is Josh Hart. What we fail to take into account is that Josh Hart was traded from the New Orleans Pelicans to the Portland Trailblazers in the middle of the 2022 season. His role changed from that of a bench player, to a main scorer and contributor for his team. RJ Barrett, another high performer, saw his role on the Knicks increase drastically as the team began looking to him for more offensive production as his role changed from a developing rookie to a core part of a mature NBA offense.We can see this clearly defined in the case of RJ Barrett’s spike plot, where his first few games he performed poorly, and the latter half of the season he performed very well. Because we define a streak as performing above their average over the whole season, players such as this may not have their innate “streakiness” accurately measured.</p>
</div>
